{% extends 'base.html' %}
{% block content %}
<div class="max-w-2xl mx-auto">
  <!-- Back Button -->
  <div class="mb-4">
    <a href="{{ url_for('teacher.dashboard') }}" class="text-sm text-[var(--cyan)] hover:underline">
      â† Back to Dashboard
    </a>
  </div>

  <div class="card">
    <div class="mb-6">
      <h1 class="text-3xl font-bold text-slate-900">Start Attendance Session</h1>
      <p class="text-sm text-slate-500 mt-1">Open a new attendance slot for students to check in</p>
    </div>

    <form method="post" class="space-y-6">
      <!-- Room Selection -->
      <div>
        <label for="room_id" class="block text-sm font-semibold text-slate-700 mb-2">
          Select Room <span class="text-red-500">*</span>
        </label>
        <select 
          id="room_id" 
          name="room_id" 
          class="w-full px-4 py-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--cyan)] focus:border-transparent"
          required
        >
          {% for r in rooms %}
            <option value="{{ r.id }}">{{ r.name }}</option>
          {% endfor %}
        </select>
        <p class="text-xs text-slate-500 mt-1">Choose the room where the session will take place</p>
      </div>

      <!-- Duration -->
      <div>
        <label for="duration" class="block text-sm font-semibold text-slate-700 mb-2">
          Duration (minutes) <span class="text-red-500">*</span>
        </label>
        <input 
          type="number" 
          id="duration" 
          name="duration" 
          value="5" 
          min="1" 
          max="180"
          class="w-full px-4 py-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--cyan)] focus:border-transparent"
          required
        />
        <p class="text-xs text-slate-500 mt-1">How long students can mark attendance (1-180 minutes)</p>
      </div>

      <!-- PIN Requirement -->
      <div class="p-4 border border-slate-200 rounded-lg">
        <div class="flex items-start gap-3">
          <input 
            type="checkbox" 
            id="require_pin" 
            name="require_pin" 
            checked
            class="mt-1 w-5 h-5 text-[var(--cyan)] border-slate-300 rounded focus:ring-2 focus:ring-[var(--cyan)]"
          />
          <div class="flex-1">
            <label for="require_pin" class="block font-semibold text-slate-900 cursor-pointer">
              Require 5-digit PIN
            </label>
            <p class="text-sm text-slate-600 mt-1">
              When enabled, a random 5-digit PIN will be generated that students must enter to mark attendance. 
              This prevents unauthorized marking.
            </p>
          </div>
        </div>
      </div>

      <!-- Submit Buttons -->
      <div class="flex gap-3 pt-4">
        <button 
          type="submit" 
          class="flex-1 px-6 py-3 btn-cyan rounded-lg hover:opacity-90 transition text-lg font-semibold">
          â–¶ï¸ Start Session
        </button>
        <a 
          href="{{ url_for('teacher.dashboard') }}" 
          class="px-6 py-3 border border-slate-300 rounded-lg hover:bg-slate-50 transition">
          Cancel
        </a>
      </div>
    </form>
  </div>

  <!-- Info Cards -->
  <div class="mt-6 grid grid-cols-1 md:grid-cols-2 gap-4">
    <div class="card bg-purple-50 border border-purple-200">
      <div class="flex gap-3">
        <div class="text-2xl">ğŸ”</div>
        <div>
          <h3 class="font-semibold text-purple-900">PIN Method</h3>
          <p class="text-sm text-purple-800 mt-1">
            Display the 5-digit PIN on screen. Students enter it to mark attendance.
          </p>
        </div>
      </div>
    </div>

    <div class="card bg-green-50 border border-green-200">
      <div class="flex gap-3">
        <div class="text-2xl">ğŸ“±</div>
        <div>
          <h3 class="font-semibold text-green-900">QR Code Method</h3>
          <p class="text-sm text-green-800 mt-1">
            Without PIN, students scan a QR code to instantly mark attendance.
          </p>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
