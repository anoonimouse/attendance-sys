{% extends "base.html" %}

{% block title %}Attendance History{% endblock %}

{% block content %}
<div class="flex items-center justify-between mb-6">
  <div>
    <h1 class="text-3xl font-bold" style="color: var(--navy);">Attendance History</h1>
    <p class="text-slate-600">Your complete attendance records</p>
  </div>
  <a href="{{ url_for('main.dashboard') }}" class="btn btn-secondary">‚Üê Back to Dashboard</a>
</div>

<div class="card">
  {% if records %}
    <div class="overflow-x-auto">
      <table class="w-full">
        <thead>
          <tr class="border-b-2 border-slate-200">
            <th class="text-left py-3 px-4 font-semibold">Room</th>
            <th class="text-left py-3 px-4 font-semibold">Date & Time</th>
            <th class="text-left py-3 px-4 font-semibold">Method</th>
            <th class="text-left py-3 px-4 font-semibold">Teacher</th>
          </tr>
        </thead>
        <tbody>
          {% for rec in records %}
            <tr class="border-b border-slate-100 hover:bg-slate-50">
              <td class="py-3 px-4">{{ rec.slot.room.name }}</td>
              <td class="py-3 px-4">{{ rec.timestamp.strftime('%b %d, %Y at %I:%M %p') }}</td>
              <td class="py-3 px-4">
                <span class="badge" style="background: #dbeafe; color: #1e40af;">
                  {{ rec.method.upper() }}
                </span>
              </td>
              <td class="py-3 px-4">{{ rec.slot.opened_by_user.name }}</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  {% else %}
    <div class="text-center py-12">
      <div class="text-6xl mb-4">üìã</div>
      <p class="text-xl text-slate-600">No attendance records yet</p>
      <p class="text-slate-500 mt-2">Start marking your attendance when sessions are active</p>
      <a href="{{ url_for('main.dashboard') }}" class="btn btn-primary mt-6">Go to Dashboard</a>
    </div>
  {% endif %}
</div>
{% endblock %}